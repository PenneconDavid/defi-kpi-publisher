KPI Pulse - Connection Guide
Purpose: Inventory every declared port, API endpoint, RPC, event trigger, and external connection used by this project.
Last Updated Phase: Step 3A CRE SDK wiring

----------------------------------------------------------------
1) External HTTP Endpoints
----------------------------------------------------------------
- Name: DefiLlama Protocol Endpoint (MVP source)
  URL Pattern: https://api.llama.fi/protocol/{protocolSlug}
  Method: GET
  Auth: None (public endpoint)
  Used By: cre-workflow/kpiCycle.ts (CRE HTTPClient), workflows/src/clients/http.ts (local scripts)
  Data Purpose: TVL and change metrics ingestion
  Failure Handling: Retry/backoff, schema validation, no-write on invalid payload

----------------------------------------------------------------
2) CRE Runtime and Capability Connections
----------------------------------------------------------------
- Name: CRE Workflow Runtime (SDK-native)
  Connection Type: CRE CLI simulation and/or deployed DON execution
  Used By: cre-workflow/main.ts (cre.handler, Runner)
  Notes: Trigger-and-callback model via @chainlink/cre-sdk

- Name: CRE CronCapability
  Connection Type: CRE internal trigger
  Used By: cre-workflow/main.ts
  Purpose: Scheduled proactive KPI fetch cycle

- Name: CRE EVMClient.logTrigger
  Connection Type: CRE capability -> on-chain event subscription
  Used By: cre-workflow/main.ts
  Purpose: Reactive trigger on UpdateRequested event

- Name: CRE HTTPClient
  Connection Type: CRE capability -> external HTTP with consensus
  Used By: cre-workflow/kpiCycle.ts
  Purpose: Fetch DefiLlama KPI data with multi-node consensus

- Name: CRE EVMClient.callContract (read)
  Connection Type: CRE capability -> target chain RPC (indirect)
  Used By: cre-workflow/kpiCycle.ts
  Purpose: Read prior KPI snapshot from KpiOracle

- Name: CRE EVMClient.writeReport (write)
  Connection Type: CRE capability -> DON consensus -> CRE forwarder -> target contract
  Used By: cre-workflow/kpiCycle.ts
  Purpose: Publish KPI snapshot and apply policy via signed reports

- Name: EVM Read/Write (local scripts)
  Connection Type: Direct ethers.js RPC calls
  Used By: workflows/src/clients/evm.ts, scripts/*
  Purpose: Local deployment and demo execution outside CRE runtime

----------------------------------------------------------------
3) Blockchain / RPC Connections
----------------------------------------------------------------
- Name: Tenderly Virtual TestNet RPC
  URL: Set via `TENDERLY_VTN_RPC_URL` (or `WORKFLOW_RPC_URL`)
  Chain Role: Primary MVP deployment and demo chain
  Used By: TypeScript deployment scripts, workflow EVM client

- Name: Optional Sepolia RPC (non-MVP fallback)
  URL: Set via `SEPOLIA_RPC_URL`
  Chain Role: Optional validation environment
  Used By: optional dual-env testing scripts

----------------------------------------------------------------
4) Onchain Event Trigger Connections
----------------------------------------------------------------
- Name: UpdateRequested Event Subscription
  Origin Contract: StrategyController
  Event Signature: UpdateRequested(bytes32 indexed protocolId, address indexed requester, string reason)
  Trigger Type: CRE EVMClient.logTrigger
  Used By: cre-workflow/main.ts, cre-workflow/logCallback.ts
  Purpose: Reactive execution path initiated by onchain signal

----------------------------------------------------------------
5) Local Service Ports (Planned)
----------------------------------------------------------------
- Name: Local app/docs preview
  Port: 3000 (reserved, optional)
  Purpose: Optional local UI/read-only status page (stretch)

- Name: Local test RPC (if using local chain tests)
  Port: 8545 (reserved for local chain testing)
  Purpose: Local-only development and tests

- Name: Foundry local Anvil RPC (optional)
  Port: 8545 (reserved for local chain testing)
  Purpose: Local fork/test execution if local testnet is used

----------------------------------------------------------------
6) Submission Evidence Links (To Populate)
----------------------------------------------------------------
- Tenderly Explorer Link: TODO in final submission pass
- Demo Video Link: TODO in final submission pass
- Public Repo Link: TODO in final submission pass
